{% extends "base.html" %}

{% block head %}
    <script>

		/*
		 * Verification dialog.
		 * TODO: create nice divs/images for yes/no options
		 * TODO: remove inline javascript on no-option
		 */
		function verifyDialog(text, url) {

			$('body').append('<div class="verify_dialog">');
			var d = $('.verify_dialog');
			d.append('<div class="verify_dialog_text">' + text + '</div>');
			d.append('<div class="verify_dialog_options"><a href="' + url + '">YES</a> <a href="javascript:void(0);" onclick="$(\'.verify_dialog\').remove();">NO</a>');

			return false;
			
		}


        $(function () {
            $(".schema_row").hover(
                function() { $(this).addClass("row_hover"); },
                function() { $(this).removeClass("row_hover"); }
            );
        });
    </script>
{% endblock %}

{% block content %}

<h1>Select schema</h1>
<table style="border-spacing: 0px;">
    <tr>
        <td colspan="3" align="right"><a href="{{ h.url(controller="schema", action="add") }}">add</a></td>
    </tr>
    <tr>
        <th>Name</th><th>Description</th><th>&nbsp;</th>
    </tr>
    {% for schema in c.schemas %}
    <tr class="schema_row" id="schema_row{{ schema.id }}">
        <td style="padding: 5px;"><a href="{{ h.url(controller='prefix', action='index', schema=schema.id) }}">{{ schema.name }}</a></td>
        <td style="padding: 5px;">{{ schema.description }}</td>
        <td>
            <a href="{{ h.url(controller="schema", action="edit", id=schema.id) }}">edit</a> | 
            <a href="javascript:void(0);" onclick="verifyDialog('Really remove {{ schema.name }}? This will remove ALL prefixes in the schema!', '{{ h.url(controller="schema", action="remove", id=schema.id) }}');">del</a>
        </td>
    </tr>
    {% endfor %}
</table>
{% endblock %}

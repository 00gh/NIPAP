{% extends "base.html" %}

{% block head %}
    <script>

		/*
		 * Verification dialog.
		 * TODO: create nice divs/images for yes/no options
		 * TODO: remove inline javascript on no-option
		 */
		function verifyDialog(text, url) {

			$('body').append('<div class="verify_dialog">');
			var d = $('.verify_dialog');
			d.append('<div class="verify_dialog_text">' + text + '</div>');
			d.append('<div class="verify_dialog_options"><a href="' + url + '">YES</a> <a href="javascript:void(0);" onclick="$(\'.verify_dialog\').remove();">NO</a>');

			return false;
			
		}


        $(function () {
            $(".schema_row").hover(
                function() { $(this).addClass("row_hover"); },
                function() { $(this).removeClass("row_hover"); }
            );
        });
    </script>
{% endblock %}

{% block content %}

<h1>Select schema</h1>
	<div style="text-align: center; padding: 20px;">
		<div style="display: inline-block; text-align: justify; width: 80%;">
			<b>TODO: this text is merely a placeholder, reword it!</b><br/>
			Schemas is like different address plans which within no addresses must collide. It's similar to the sheets in a Excel document and bare almost always a perfect equality to VRFs.<br/>
			<br/>
		</div>
	</div>

	<div style="position: absolute; right: 20px; top: 14px;">
		{{ button('Add schema', color='red', url=h.url(controller = 'schema', action = 'add')) }}
	</div>

<table style="border-spacing: 0px; width: 100%;">
	<thead class="listing">
		<tr>
			<th style="padding-left: 30px;">Name</th><th>Description</th><th></th>
		</tr>
	</thead>
	<tbody class="listing">
		{% for schema in c.schemas %}
		<tr class="schema_row" id="schema_row{{ schema.id }}">
			<td style="padding-left: 30px;"><a href="{{ h.url(controller='prefix', action='index', schema=schema.id) }}">{{ schema.name }}</a></td>
			<td>{{ schema.description }}</td>
			<td>
				<a href="{{ h.url(controller="schema", action="edit", id=schema.id) }}">edit</a> | 
				<a href="javascript:void(0);" onclick="verifyDialog('Really remove {{ schema.name }}? This will remove ALL prefixes in the schema!', '{{ h.url(controller="schema", action="remove", id=schema.id) }}');">del</a>
			</td>
		</tr>
		{% endfor %}
	</tbody>
</table>
{% endblock %}
